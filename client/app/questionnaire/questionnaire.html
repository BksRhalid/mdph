<ui-view>
  <div ng-if="loading"><h1>Loading</h1></div>
  <div class="nav-questionnaire">
    <div class="container">
      <ol class="breadcrumb">
        <li><a ui-sref="departement">Accueil du {{mdph.name}}</a></li>
        <li class="active">Questionnaire</li>
      </ol>
    </div>
  </div>

  <div class="questionnaire">

    <h1>Renseignements obligatoires<br><small>Pour toutes les demandes</small></h1>
    <div class="category">
      <a class="section" ui-sref="{{section.sref}}" ng-if="shouldShow(section)" ng-repeat="section in sectionsObligatoires">
        <div class="section-body">
          <div class="left">
            <i class="fa fa-chevron-circle-right"></i>
          </div>
          <div class="right">
            <h2>{{section.label}}</h2>
            <p>{{section.desc}}</p>
            <div class="row">
              <div class="col-xs-10 col-xs-offset-2 col-sm-3 col-sm-offset-9">
                <section-progress-bar completion="getCompletion(section.id)"></section-progress-bar>
              </div>
            </div>
          </div>
        </div>
      </a>
    </div>

    <h1>Renseignements complémentaires<br><small>En fonction de votre situation</small></h1>

    <div class="category">
      <a class="section" ui-sref="{{section.sref}}" ng-repeat="section in sectionsComplementaires">
        <div class="section-body">
          <div class="left">
            <i class="fa fa-chevron-circle-right"></i>
          </div>
          <div class="right">
            <h2>{{section.label}}</h2>
            <p>{{section.desc}}</p>
            <div class="row">
              <div class="col-xs-10 col-xs-offset-2 col-sm-3 col-sm-offset-9">
                <section-progress-bar completion="getCompletion(section.id)"></section-progress-bar>
              </div>
            </div>
          </div>
        </div>
      </a>
    </div>

    <h1>Autour de votre demande</h1>

    <div class="category">
      <a class="section" ui-sref="{{section.sref}}" ng-repeat="section in sectionsBonus">
        <div class="section-body">
          <div class="left">
            <i class="fa fa-chevron-circle-right"></i>
          </div>
          <div class="right">
            <h2>{{section.label}}</h2>
            <p>{{section.desc}}</p>
            <div class="row">
              <div class="col-xs-10 col-xs-offset-2 col-sm-3 col-sm-offset-9">
                <section-progress-bar completion="getCompletion(section.id)"></section-progress-bar>
              </div>
            </div>
          </div>
        </div>
      </a>
    </div>

    <a class="section-inverse" ui-sref="departement.questionnaire.documents">
      <div class="section-body">
        <div class="left">
          <i class="fa fa-chevron-circle-right"></i>
        </div>
        <h2>Documents liés à votre demande</h2>
        <p>Pour nous transmettre les documents justificatifs obligatoires et complémentaires</p>
        <div class="row">
          <div class="col-xs-10 col-xs-offset-2 col-sm-3 col-sm-offset-9">
            <section-progress-bar completion="getCompletion(section.id)"></section-progress-bar>
          </div>
        </div>
      </div>
    </a>

    <div class="text-right" ng-if="currentRequest.steps[0].state === 'en_cours'">
      <button class="btn btn-lg btn-default" ng-click="sauvegarder()">Sauvegarder</button>
      <button class="btn btn-lg btn-primary" ng-click="envoyer()">Envoyer</button>
    </div>

    <div class="text-right" ng-if="currentRequest.steps[0].state === 'complet'">
      <a class="btn btn-lg btn-success" ui-sref="espace_perso.liste_demandes.demande.obligatoire({shortId: currentRequest.shortId})">Étape suivante</a>
    </div>
  </div>
</ui-view>
